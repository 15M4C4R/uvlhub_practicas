{% extends "base_template.html" %}

{% block title %}Main page{% endblock %}

{% block content %}

    <h1 class="h2 mb-3">

        <b>Latest</b> datasets
    </h1>

    <div class="row">

        <div class="mb-2 col-xl-8 col-lg-12 col-md-12 col-sm-12">

            {% for dataset in datasets %}
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex align-items-center justify-content-between">
                            <h2>

                                <a href="{{ dataset.get_uvlhub_doi() }}">
                                    {{ dataset.ds_meta_data.title }}
                                </a>

                            </h2>
                            <div>
                                <span class="badge bg-secondary">{{ dataset.get_cleaned_publication_type() }}</span>
                            </div>
                        </div>
                        <p class="text-secondary">{{ dataset.created_at.strftime('%B %d, %Y at %I:%M %p') }}</p>

                        <div class="row mb-2">

                            <div class="col-12">
                                <p class="card-text">{{ dataset.ds_meta_data.description }}</p>
                            </div>

                        </div>

                        <div class="row mb-2 mt-4">

                            <div class="col-12">
                                {% for author in dataset.ds_meta_data.authors %}
                                    <p class="p-0 m-0">
                                        {{ author.name }}
                                        {% if author.affiliation %}
                                            ({{ author.affiliation }})
                                        {% endif %}
                                        {% if author.orcid %}
                                            ({{ author.orcid }})
                                        {% endif %}
                                    </p>
                                {% endfor %}
                            </div>


                        </div>

                        <div class="row mb-2">

                            <div class="col-12">
                                <a href="{{ dataset.get_uvlhub_doi() }}">{{ dataset.get_uvlhub_doi() }}</a>
                                 <div id="dataset_doi_uvlhub_{{ dataset.id }}" style="display: none">
                                {{ dataset.get_uvlhub_doi() }}
                            </div>

                            <i data-feather="clipboard" class="center-button-icon"
                               style="cursor: pointer"
                               onclick="copyText('dataset_doi_uvlhub_{{ dataset.id }}')"></i>
                            </div>



                        </div>

                        <div class="row mb-2">

                            <div class="col-12">
                                {% for tag in dataset.ds_meta_data.tags.split(',') %}
                                    <span class="badge bg-secondary">{{ tag.strip() }}</span>
                                {% endfor %}
                            </div>

                        </div>

                        <div class="row  mt-4">
                            <div class="col-12">
                                <a href="{{ dataset.get_uvlhub_doi() }}" class="btn btn-outline-primary btn-sm"
                                   style="border-radius: 5px;">
                                    <i data-feather="eye" class="center-button-icon"></i>
                                    View dataset
                                </a>

                                <a href="/dataset/download/{{ dataset.id }}" class="btn btn-outline-primary btn-sm"
                                   style="border-radius: 5px;">
                                    <i data-feather="download" class="center-button-icon"></i>
                                    Download ({{ dataset.get_file_total_size_for_human() }})
                                </a>
                            </div>
                        </div>


                    </div>
                </div>
            {% endfor %}

            <a href="/explore" class="btn btn-primary">
                <i data-feather="search" class="center-button-icon"></i>
                Explore more datasets
            </a>

        </div>

        <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12">

            <div class="row">

                <div class="col-12">

                <div class="card">

                    <div class="card-body">

                        <h2> <b>Hub statistics</b> </h2>
                    
                        <h1 class="h2 mb-3">
                    
                            <h4 class="h4 mb-3" class="stats-color">
                                <i data-feather="database" class="align-middle mr-2 stats-color"></i>&nbsp;{{ datasets_counter }} datasets
                            </h4>
                    
                            <h4 class="h4 mb-3" class="stats-color">
                                <i data-feather="file" class="align-middle mr-2 stats-color"></i>&nbsp;{{ feature_models_counter }} feature models
                            </h4>
                    
                            <h4 class="h4 mb-3" class="stats-color">
                                <i data-feather="eye" class="align-middle mr-2 stats-color"></i>&nbsp;{{ total_dataset_views }} datasets viewed
                            </h4>
                    
                            <h4 class="h4 mb-3" class="stats-color">
                                <i data-feather="eye" class="align-middle mr-2 stats-color"></i>&nbsp;{{ total_feature_model_views }} feature models viewed
                            </h4>
                    
                            <h4 class="h4 mb-3" class="stats-color">
                                <i data-feather="download" class="align-middle mr-2 stats-color"></i>&nbsp;{{ total_dataset_downloads }} datasets downloaded
                            </h4>
                    
                            <h4 class="h4" class="stats-color">
                                <i data-feather="download" class="align-middle mr-2 stats-color"></i>&nbsp;{{ total_feature_model_downloads }} feature models downloaded
                            </h4>
                    
                        </h1>
                    
                    </div>                    

                </div>
            </div>

                <div class="col-12">

                    <div class="card">

                        <div class="card-body">

                            <div id="bibtex_cite" style="display: none">
                                @article{ROMEROORGANVIDEZ2024112150,
                                    title = {UVLHub: A feature model data repository using UVL and open science principles},
                                    journal = {Journal of Systems and Software},
                                    pages = {112150},
                                    year = {2024},
                                    issn = {0164-1212},
                                    doi = {https://doi.org/10.1016/j.jss.2024.112150},
                                    url = {https://www.sciencedirect.com/science/article/pii/S016412122400195X},
                                    author = {David Romero-Organvidez and José A. Galindo and Chico Sundermann and Jose-Miguel Horcas and David Benavides},
                                    keywords = {Feature models, Software product line, Variability, Dataset, Uvl},
                                    abstract = {Feature models are the de facto standard for modelling variabilities and commonalities in features and relationships in software product lines. They are the base artefacts in many engineering activities, such as product configuration, derivation, or testing. Concrete models in different domains exist; however, many are in private or sparse repositories or belong to discontinued projects. The dispersion of knowledge of feature models hinders the study and reuse of these artefacts in different studies. The Universal Variability Language (UVL) is a community effort textual feature model language that promotes a common way of serialising feature models independently of concrete tools. Open science principles promote transparency, accessibility, and collaboration in scientific research. Although some attempts exist to promote feature model sharing, the existing solutions lack open science principles by design. In addition, existing and public feature models are described using formats not always supported by current tools. This paper presents , a repository of feature models in UVL format. provides a front end that facilitates the search, upload, storage, and management of feature model datasets, improving the capabilities of discontinued proposals. Furthermore, the tool communicates with Zenodo –one of the most well-known open science repositories– providing a permanent save of datasets and following open science principles. includes existing datasets and is readily available to include new data and functionalities in the future. It is maintained by three active universities in variability modelling.}
                                }
                            </div>

                            <h2> <b>Cite us!</b> </h2>
                            
                            David Romero-Organvidez, José A. Galindo, Chico Sundermann, Jose-Miguel Horcas, David Benavides,
                            <i>UVLHub: A feature model data repository using UVL and open science principles</i>,
                            Journal of Systems and Software,
                            2024,
                            112150,
                            ISSN 0164-1212,
                            https://doi.org/10.1016/j.jss.2024.112150

                        </div>

                        <div class="card-body mt-0 pt-0">

                            <button onclick="copyText('bibtex_cite')" class="btn btn-light" style="border-radius: 5px;">
                                <i data-feather="clipboard" class="center-button-icon"></i>
                                Copy cite in Bibtex
                            </button>

                        </div>

                    </div>

                </div>

                {% if current_user.is_anonymous %}

                    <div class="col-12">
                        <div class="card card-welcome">

                            <h2 class="card-title card-title-light">
                                Let's get started!
                            </h2>

                            <div class="card-body card-body-slim">

                                What are you waiting for to upload your fantastic feature models in UVL format?

                                <div class="row mt-2">

                                    <div class="col-12">
                                        <a href="/signup"
                                           class="btn btn-dark"
                                           style="background-color: #0662A6; border-color: #0662A6">
                                            <i data-feather="user-plus" class="center-button-icon"></i>
                                            Sign up
                                        </a>
                                    </div>

                                    <div class="col-12 mt-2">
                                        <a href="/login"
                                           class="btn btn-outline-dark" style=" border-color: #0662A6">
                                            <i data-feather="log-in" class="center-button-icon"></i>
                                            I am already registered!
                                        </a>
                                    </div>

                                </div>


                            </div>

                        </div>
                    </div>

                {% endif %}

                <div class="col-12">

                    <div class="card card-dark">

                        <h2 class="card-title card-title-light">
                            What is <b>uvlhub.io</b>?
                        </h2>

                        <div class="card-body card-body-slim">

                            <strong>uvlhub.io</strong> is a repository of feature models in UVL format integrated with
                            Zenodo and FlamaPy developed by DiversoLab

                        </div>

                        <h2 class="card-title card-title-light">
                            Can I contribute?
                        </h2>

                        <div class="card-body card-body-slim">

                            Sure! You can make a fork of our official repository on GitHub,
                            create fantastic features and then make a pull request to us.

                            <br><br>

                            <a href="https://github.com/diverso-lab/uvlhub" target="_blank" class="btn btn-primary">
                                Go to GitHub</a>

                        </div>

                    </div>
                </div>

            </div>


        </div>

    </div>

{% endblock %}
